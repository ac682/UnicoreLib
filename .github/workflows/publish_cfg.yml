name: .NET Core

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Setup .NET Core
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: 3.1
    - name: Build with dotnet
      run: dotnet build UnicoreLib.Configuration/UnicoreLib.Configuration.csproj --configuration Release
  publish:
    runs-on: ubuntu-latest
    steps:
      - name: Publish NuGet
        uses: rohith/publish-nuget@v2.1.0
        with:
          # Filepath of the project to be packaged, relative to root of repository
          PROJECT_FILE_PATH: UnicoreLib.Configuration/UnicoreLib.Configuration.csproj
          # API key for the NuGet feed
          NUGET_KEY: oy2hijg5code4eshujkaqry2krqzyqiu5msyooexeak2vy
          # NuGet package name, required when it's different from the project name
          PACKAGE_NAME: UnicoreLib.Configuration
